<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>VapeShop - –ö–∞—Ç–∞–ª–æ–≥</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="app">
        <!-- Header -->
        <header class="header">
            <h1 class="header-title">VapeShop</h1>
            <div class="header-right">
                <div class="bonus-badge" id="bonusBadge">
                    <span class="bonus-icon">üíé</span>
                    <span class="bonus-count" id="bonusCount">0</span>
                </div>
            </div>
        </header>

        <!-- Pages Container -->
        <main class="pages-container">
            <!-- Catalog Page -->
            <div class="page active" id="catalogPage">
                <div class="search-container">
                    <div class="search-box">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8" />
                            <line x1="21" y1="21" x2="16.65" y2="16.65" />
                        </svg>
                        <input type="text" id="searchInput" placeholder="–ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤...">
                    </div>
                </div>
                <div class="categories" id="categories">
                    <button class="category-btn active" data-category="all">–í—Å–µ</button>
                    <button class="category-btn" data-category="elfbar">Elf Bar</button>
                    <button class="category-btn" data-category="hqd">HQD</button>
                    <button class="category-btn" data-category="waka">Waka</button>
                    <button class="category-btn" data-category="lost-mary">Lost Mary</button>
                </div>
                <div class="products-grid" id="productsGrid"></div>
            </div>

            <!-- Favorites Page -->
            <div class="page" id="favoritesPage">
                <div class="page-header">
                    <h2>–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</h2>
                </div>
                <div class="favorites-grid" id="favoritesGrid"></div>
                <div class="empty-state" id="favoritesEmpty">
                    <span class="empty-icon">‚ù§Ô∏è</span>
                    <p>–ù–µ—Ç –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤</p>
                    <small>–ù–∞–∂–º–∏—Ç–µ ‚ù§Ô∏è –Ω–∞ —Ç–æ–≤–∞—Ä–µ, —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ</small>
                </div>
            </div>

            <!-- Profile Page -->
            <div class="page" id="profilePage">
                <div class="profile-header">
                    <span class="profile-greeting">–î–æ–±—Ä—ã–π –¥–µ–Ω—å üëã</span>
                    <div class="profile-bonus">
                        <span class="bonus-icon-lg">üíé</span>
                        <span class="bonus-amount" id="profileBonus">0</span>
                    </div>
                </div>
                <div class="profile-menu">
                    <div class="menu-item" onclick="openAddresses()">
                        <span class="menu-icon">üìç</span>
                        <span class="menu-text">–ú–æ–∏ –∞–¥—Ä–µ—Å–∞</span>
                        <span class="menu-arrow">‚Ä∫</span>
                    </div>
                    <div class="menu-item" onclick="openOrders()">
                        <span class="menu-icon">üì¶</span>
                        <span class="menu-text">–ú–æ–∏ –∑–∞–∫–∞–∑—ã</span>
                        <span class="menu-arrow">‚Ä∫</span>
                    </div>
                    <div class="menu-item" onclick="openBonusInfo()">
                        <span class="menu-icon">üíé</span>
                        <span class="menu-text">–ë–æ–Ω—É—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞</span>
                        <span class="menu-arrow">‚Ä∫</span>
                    </div>
                </div>
            </div>

            <!-- Cart Page -->
            <div class="page" id="cartPage">
                <div class="page-header">
                    <h2>–ö–æ—Ä–∑–∏–Ω–∞</h2>
                </div>
                <div class="cart-summary" id="cartSummary">
                    <span id="cartItemsCount">0 —Ç–æ–≤–∞—Ä–æ–≤</span> –Ω–∞ <span id="cartTotalTop">0 ‚ÇΩ</span>
                </div>
                <div class="cart-items-list" id="cartItemsList"></div>
                <div class="promo-section">
                    <input type="text" id="promoInput" placeholder="–í–≤–µ—Å—Ç–∏ –ø—Ä–æ–º–æ–∫–æ–¥">
                    <button class="promo-btn" onclick="applyPromo()">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
                </div>
                <div class="cart-totals">
                    <div class="total-row"><span>–¢–æ–≤–∞—Ä—ã:</span><span id="subtotal">0 ‚ÇΩ</span></div>
                    <div class="total-row"><span>–°–∫–∏–¥–∫–∞:</span><span id="discount" class="discount">0 ‚ÇΩ</span></div>
                    <div class="total-row"><span>–î–æ—Å—Ç–∞–≤–∫–∞:</span><span id="deliveryPrice">–ë–µ—Å–ø–ª–∞—Ç–Ω–æ</span></div>
                </div>
                <button class="checkout-main-btn" id="checkoutMainBtn" onclick="openCheckout()">
                    –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑ –Ω–∞ <span id="finalTotal">0 ‚ÇΩ</span>
                </button>
                <div class="empty-state" id="cartEmpty">
                    <span class="empty-icon">üõí</span>
                    <p>–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</p>
                    <small>–î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä—ã –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞</small>
                </div>
            </div>
        </main>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <button class="nav-item active" data-page="catalog">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="3" width="7" height="7" />
                    <rect x="14" y="3" width="7" height="7" />
                    <rect x="3" y="14" width="7" height="7" />
                    <rect x="14" y="14" width="7" height="7" />
                </svg>
                <span>–ö–∞—Ç–∞–ª–æ–≥</span>
            </button>
            <button class="nav-item" data-page="favorites">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path
                        d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" />
                </svg>
                <span>–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</span>
            </button>
            <button class="nav-item" data-page="profile">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
                    <circle cx="12" cy="7" r="4" />
                </svg>
                <span>–ü—Ä–æ—Ñ–∏–ª—å</span>
            </button>
            <button class="nav-item" data-page="cart">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="9" cy="21" r="1" />
                    <circle cx="20" cy="21" r="1" />
                    <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6" />
                </svg>
                <span>–ö–æ—Ä–∑–∏–Ω–∞</span>
                <span class="nav-badge" id="navCartBadge">0</span>
            </button>
        </nav>
    </div>

    <!-- Product Modal -->
    <div class="modal-overlay" id="productModal">
        <div class="modal product-modal">
            <div class="product-modal-header">
                <button class="favorite-btn" id="modalFavoriteBtn">‚ù§Ô∏è</button>
                <button class="modal-close" id="closeProduct">‚úï</button>
            </div>
            <div class="product-modal-image" id="modalProductImage"></div>
            <div class="product-modal-content">
                <h2 id="modalProductName"></h2>
                <div class="product-puffs" id="modalProductPuffs"></div>
                <div class="variants-section">
                    <p class="variants-label">–í—ã–±–µ—Ä–∏—Ç–µ –≤–∫—É—Å:</p>
                    <div class="variants-grid" id="variantsGrid"></div>
                </div>
            </div>
            <div class="product-modal-footer">
                <span class="modal-action-text">–°–¥–µ–ª–∞–π—Ç–µ —Å–≤–æ–π –≤—ã–±–æ—Ä</span>
                <button class="add-to-cart-modal-btn" id="addToCartModalBtn">–í –∫–æ—Ä–∑–∏–Ω—É</button>
            </div>
        </div>
    </div>

    <!-- Addresses Modal -->
    <div class="modal-overlay" id="addressesModal">
        <div class="modal">
            <div class="modal-header">
                <h2>–ú–æ–∏ –∞–¥—Ä–µ—Å–∞</h2>
                <button class="modal-close" onclick="closeAddresses()">‚úï</button>
            </div>
            <div class="addresses-list" id="addressesList"></div>
            <button class="add-address-btn" onclick="addNewAddress()">+ –î–æ–±–∞–≤–∏—Ç—å –∞–¥—Ä–µ—Å</button>
        </div>
    </div>

    <!-- Orders Modal -->
    <div class="modal-overlay" id="ordersModal">
        <div class="modal">
            <div class="modal-header">
                <h2>–ú–æ–∏ –∑–∞–∫–∞–∑—ã</h2>
                <button class="modal-close" onclick="closeOrders()">‚úï</button>
            </div>
            <div class="orders-list" id="ordersList"></div>
            <div class="empty-state" id="ordersEmpty">
                <span class="empty-icon">üì¶</span>
                <p>–ù–µ—Ç –∑–∞–∫–∞–∑–æ–≤</p>
            </div>
        </div>
    </div>

    <!-- Bonus Info Modal -->
    <div class="modal-overlay" id="bonusModal">
        <div class="modal">
            <div class="modal-header">
                <h2>–ë–æ–Ω—É—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞</h2>
                <button class="modal-close" onclick="closeBonusInfo()">‚úï</button>
            </div>
            <div class="bonus-info">
                <div class="bonus-card">
                    <span class="bonus-icon-xl">üíé</span>
                    <span class="bonus-value" id="bonusCardValue">0</span>
                    <span class="bonus-label">–±–æ–Ω—É—Å–æ–≤</span>
                </div>
                <div class="bonus-rules">
                    <h3>–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –±–æ–Ω—É—Å—ã:</h3>
                    <ul>
                        <li>5% –æ—Ç –∫–∞–∂–¥–æ–π –ø–æ–∫—É–ø–∫–∏</li>
                        <li>–ë–æ–Ω—É—Å—ã –∑–∞ –æ—Ç–∑—ã–≤—ã</li>
                        <li>–ë–æ–Ω—É—Å—ã –∑–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –¥—Ä—É–∑–µ–π</li>
                    </ul>
                    <h3>–ö–∞–∫ –ø–æ—Ç—Ä–∞—Ç–∏—Ç—å:</h3>
                    <ul>
                        <li>–û–ø–ª–∞—á–∏–≤–∞–π—Ç–µ –¥–æ 30% –∑–∞–∫–∞–∑–∞ –±–æ–Ω—É—Å–∞–º–∏</li>
                        <li>1 –±–æ–Ω—É—Å = 1 —Ä—É–±–ª—å</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Checkout Modal -->
    <div class="modal-overlay" id="checkoutModal">
        <div class="modal checkout-modal">
            <div class="modal-header">
                <h2>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h2>
                <button class="modal-close" id="closeCheckout">‚úï</button>
            </div>
            <form class="checkout-form" id="checkoutForm">
                <div class="form-group">
                    <label>–í–∞—à–µ –∏–º—è</label>
                    <input type="text" id="customerName" required placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è">
                </div>
                <div class="form-group">
                    <label>–¢–µ–ª–µ—Ñ–æ–Ω</label>
                    <input type="tel" id="customerPhone" required placeholder="+7 (999) 999-99-99">
                </div>
                <div class="form-group">
                    <label>–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏</label>
                    <select id="savedAddress" onchange="handleAddressChange()">
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–π –∞–¥—Ä–µ—Å</option>
                    </select>
                    <textarea id="deliveryAddress" required placeholder="–ò–ª–∏ –≤–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π –∞–¥—Ä–µ—Å"></textarea>
                </div>
                <div class="form-group">
                    <label>–°–ø–æ—Å–æ–± –¥–æ—Å—Ç–∞–≤–∫–∏</label>
                    <div class="delivery-options">
                        <label class="radio-option">
                            <input type="radio" name="delivery" value="courier" checked>
                            <span class="radio-custom"></span>
                            <span class="radio-label"><strong>–ö—É—Ä—å–µ—Ä</strong><small>1-2 –¥–Ω—è, 300 ‚ÇΩ</small></span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="delivery" value="pickup">
                            <span class="radio-custom"></span>
                            <span class="radio-label"><strong>–°–∞–º–æ–≤—ã–≤–æ–∑</strong><small>–ë–µ—Å–ø–ª–∞—Ç–Ω–æ</small></span>
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <label class="checkbox-option">
                        <input type="checkbox" id="useBonuses" onchange="updateCheckoutTotal()">
                        <span class="checkbox-custom"></span>
                        <span>–°–ø–∏—Å–∞—Ç—å –±–æ–Ω—É—Å—ã (<span id="availableBonuses">0</span> –¥–æ—Å—Ç—É–ø–Ω–æ)</span>
                    </label>
                </div>
                <div class="order-summary">
                    <div class="summary-row"><span>–¢–æ–≤–∞—Ä—ã:</span><span id="checkoutProducts">0 ‚ÇΩ</span></div>
                    <div class="summary-row"><span>–°–∫–∏–¥–∫–∞:</span><span id="checkoutDiscount">0 ‚ÇΩ</span></div>
                    <div class="summary-row"><span>–ë–æ–Ω—É—Å—ã:</span><span id="checkoutBonuses">0 ‚ÇΩ</span></div>
                    <div class="summary-row"><span>–î–æ—Å—Ç–∞–≤–∫–∞:</span><span id="checkoutDelivery">300 ‚ÇΩ</span></div>
                    <div class="summary-row total"><span>–ò—Ç–æ–≥–æ:</span><span id="checkoutTotal">0 ‚ÇΩ</span></div>
                </div>
                <button type="submit" class="submit-order-btn">üì® –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑</button>
            </form>
        </div>
    </div>

    <!-- Success Modal -->
    <div class="modal-overlay" id="successModal">
        <div class="modal success-modal">
            <div class="success-icon">‚úÖ</div>
            <h2>–ó–∞–∫–∞–∑ –æ—Ñ–æ—Ä–º–ª–µ–Ω!</h2>
            <p>–ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è</p>
            <div class="bonus-earned">+<span id="earnedBonuses">0</span> üíé –±–æ–Ω—É—Å–æ–≤ –Ω–∞—á–∏—Å–ª–µ–Ω–æ!</div>
            <button class="success-btn" onclick="closeSuccess()">–û—Ç–ª–∏—á–Ω–æ!</button>
        </div>
    </div>

    <!-- Add Address Modal -->
    <div class="modal-overlay" id="addAddressModal">
        <div class="modal">
            <div class="modal-header">
                <h2>–ù–æ–≤—ã–π –∞–¥—Ä–µ—Å</h2>
                <button class="modal-close" onclick="closeAddAddress()">‚úï</button>
            </div>
            <form class="address-form" onsubmit="saveAddress(event)">
                <div class="form-group">
                    <label>–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                    <input type="text" id="addressName" placeholder="–î–æ–º, –†–∞–±–æ—Ç–∞..." required>
                </div>
                <div class="form-group">
                    <label>–ê–¥—Ä–µ—Å</label>
                    <textarea id="addressValue" placeholder="–ì–æ—Ä–æ–¥, —É–ª–∏—Ü–∞, –¥–æ–º, –∫–≤–∞—Ä—Ç–∏—Ä–∞" required></textarea>
                </div>
                <button type="submit" class="save-address-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </form>
        </div>
    </div>

    <script src="app.js"></script>
</body>

</html>